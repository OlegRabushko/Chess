(this.webpackJsonpchess=this.webpackJsonpchess||[]).push([[0],{19:function(e,t,n){e.exports={App:"replays_App__29WQr",green:"replays_green__3vz0F",lobby__btn:"replays_lobby__btn__PA_lZ",repeats__block:"replays_repeats__block__2r3aW",chess__info:"replays_chess__info__2l6pu",info__inner:"replays_info__inner__sqkqY",name__circle:"replays_name__circle__3E9VQ",name__circle_2:"replays_name__circle_2__2R8jU",win__marker:"replays_win__marker__2gtEd",moves__info:"replays_moves__info__1wTxf",time__info:"replays_time__info__3RP07",link:"replays_link__97hfQ",chess__grid:"replays_chess__grid__26t3G"}},27:function(e,t,n){e.exports={App:"header_App__LL4wS",green:"header_green__2TjVJ",header__container:"header_header__container__cOgDH",logo__img:"header_logo__img__H-af_",logo__text:"header_logo__text__1lWxo"}},43:function(e,t,n){e.exports={App:"footer_App__2o9kA",green:"footer_green__1uZ_8",footer__container:"footer_footer__container__1F-rW"}},5:function(e,t,n){e.exports={App:"start-window_App__2Yy2j",green:"start-window_green__1as9H",body__container:"start-window_body__container__3vHb3",player__box:"start-window_player__box__3wkrq",player__ava:"start-window_player__ava__23rNS",player__name:"start-window_player__name__8jgwn",btns__container:"start-window_btns__container__3Ajuv",start__btn:"start-window_start__btn__2flKG",network__info:"start-window_network__info__Iq29u",view__btn:"start-window_view__btn__1E6Io",modal:"start-window_modal__2Iwfx",modal__inner:"start-window_modal__inner__2NJjs",top__text:"start-window_top__text__2IweO",top__text_special:"start-window_top__text_special__1XB6M",input__plus__text:"start-window_input__plus__text__1aOB1",input:"start-window_input__1FUv3",text:"start-window_text__3K1Z0",change__btn:"start-window_change__btn__30CX4",block__container:"start-window_block__container__9cJbV",inactive__type:"start-window_inactive__type__2a8cE",active__type:"start-window_active__type__3Vb8X",change__game__btn:"start-window_change__game__btn__3c-Wn",modal__disable:"start-window_modal__disable__38mPS"}},50:function(e,t,n){},6:function(e,t,n){e.exports={App:"game_App__2OGr5",green:"game_green__1wJQC",game__container:"game_game__container__3oYEc",timer:"game_timer__3Icu0",loss__btn:"game_loss__btn__1ZEJO",start__btn:"game_start__btn__Nvhas",lobby__btn:"game_lobby__btn__1fybW",replays__btn:"game_replays__btn__1LuEl",player__field:"game_player__field__1ZR3k",player__ava:"game_player__ava__3rODl",player__name:"game_player__name__s6iNL",win__ico:"game_win__ico__3QiQ4",moveHand__img:"game_moveHand__img__2Ly7l",player__board:"game_player__board__d4Z7V",part__one:"game_part__one__3wjiH",part__two:"game_part__two__1938v",part__three:"game_part__three__2pvNk",figure__img:"game_figure__img__32Pua",move__info:"game_move__info__1P3Qi",win__window:"game_win__window__6tp3z",winWindow:"game_winWindow__2hcB_",preloader__window:"game_preloader__window__8CCTx",text:"game_text__g6yiQ",preloader:"game_preloader__169t4"}},76:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var a,r,c=n(1),s=n.n(c),i=n(24),o=n.n(i),u=(n(50),n(27)),_=n.n(u),l=n(0),p=function(){return Object(l.jsxs)("div",{className:_.a.header__container,children:[Object(l.jsx)("div",{className:_.a.logo__img}),Object(l.jsx)("div",{className:_.a.logo__text})]})},m=n(13),b=n(8),d=n(2),f=n.n(d),j=n(3),O=n(4),h=n(9),g=n.n(h),v=function(e){var t=e.number,n=e.image,a=e.position,r=e.size;return t%2===0?Object(l.jsx)("div",{className:g.a.black__field,children:n&&Object(l.jsx)("div",{style:{backgroundImage:"url(".concat(n,")"),width:"".concat(r,"px")},className:g.a.figure__img,children:a})}):Object(l.jsx)("div",{className:g.a.white__field,children:n&&Object(l.jsx)("div",{style:{backgroundImage:"url(".concat(n,")"),width:"".concat(r,"px")},className:g.a.figure__img,children:a})})},y=n(40),x=n(41);!function(e){e[e.OPPONENT=0]="OPPONENT",e[e.OUR=1]="OUR"}(a||(a={})),function(e){e[e.PAWN=0]="PAWN",e[e.BISHOP=1]="BISHOP",e[e.KNIGHT=2]="KNIGHT",e[e.ROOK=3]="ROOK",e[e.QUEEN=4]="QUEEN",e[e.KING=5]="KING"}(r||(r={}));var w,N=function(){function e(){Object(y.a)(this,e)}return Object(x.a)(e,[{key:"tileIsOccupiedForPawns",value:function(e,t,n){return!!n.find((function(n){return n.x===e&&n.y===t}))}},{key:"tileIsOccupied",value:function(e,t,n,a,r,c,s){return!!n.find((function(n){return n.x===e&&n.y===t&&n.team===a}))}},{key:"checkWin",value:function(e,t,n){return!!n.find((function(n){return n.x===e&&n.y===t&&n.type===r.KING}))}},{key:"tileIsOccupiedByOpponent",value:function(e,t,n,a){return!!n.find((function(n){return n.x===e&&n.y===t&&n.team!==a}))}},{key:"checkMoveRook",value:function(e,t,n,a,r){return e-t===r&&n-a===0}},{key:"isEnPassantMove",value:function(e,t,n,c,s,i,o){var u=i===a.OUR?1:-1;if(s===r.PAWN&&((e-n===1||e-n===-1)&&t-c===u&&o.find((function(e){return e.x===n&&e.y===c+u&&e.enPassant}))))return!0;return!1}},{key:"isValidMove",value:function(e,t,n,c,s,i,o,u){if(s===r.BISHOP&&(("white"===u?(n+c)%2===0:(n+c)%2===1)&&e!==n&&t!==c&&!this.tileIsOccupied(n,c,o,i,e,t)))return!0;if(s===r.KING&&(e-n===1||e-n===-1||t-c===1||t-c===-1)&&!this.tileIsOccupied(n,c,o,i))return!0;if(s===r.QUEEN)for(var _=function(a,r){return"-"===r?e-n===-a&&t-c===a:"x"===r?e-n===a&&t-c===0:"y"===r?t-c===a&&e-n===0:e-n===a&&t-c===a},l=-7;l<8;l++)if((_(l)||_(l,"-")||_(l,"x")||_(l,"y"))&&!this.tileIsOccupied(n,c,o,i))return!0;if(s===r.KNIGHT&&(e-n===1&&t-c===2||e-n===-1&&t-c===-2||e-n===1&&t-c===-2||e-n===-1&&t-c===2||e-n===-2&&t-c===-1||e-n===2&&t-c===1||e-n===-2&&t-c===1||e-n===2&&t-c===-1)&&!this.tileIsOccupied(n,c,o,i))return!0;if(s===r.ROOK)for(var p=function(a,r){return"x"===r?e-n===a&&t-c===0:t-c===a&&e-n===0},m=-7;m<8;m++)if((p(m,"x")||p(m,"y"))&&!this.tileIsOccupied(n,c,o,i))return!0;if(s===r.PAWN){var b=i===a.OUR?6:1,d=i===a.OUR?1:-1;if(e-n===1&&t-c===d||e-n===-1&&t-c===d){if(this.tileIsOccupiedByOpponent(n,c,o,i))return!0}else if(t===b){if(e===n&&t-c===1*d&&!this.tileIsOccupiedForPawns(n,c,o))return!0;if(e===n&&t-c===2*d&&!this.tileIsOccupiedForPawns(n,c,o)&&!this.tileIsOccupiedForPawns(n,c+1*d,o))return!0}else if(e===n&&t-c===1*d&&!this.tileIsOccupiedForPawns(n,c,o))return!0}return!1}}]),e}(),k=n(42),P=n.n(k),S=function(){var e=Object(j.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://evening-beach-47135.herokuapp.com/state");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(j.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://evening-beach-47135.herokuapp.com/state",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(t)});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(j.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://evening-beach-47135.herokuapp.com/state/".concat(t),{method:"DELETE"});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(j.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://evening-beach-47135.herokuapp.com/state/queue");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(j.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://evening-beach-47135.herokuapp.com/state/queue",{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify([t])});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(j.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E({name:localStorage.getItem("player"),id:Date.now()});case 2:return e.next=4,P.a.post("https://evening-beach-47135.herokuapp.com/new-player");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=n(10),C="SET_GAME",U="SET_ONLINE_PLAYERS",F="SET_MOVES_ONE",M="SET_MOVES_TWO",K="ADD_MOVE_ONE",G="ADD_MOVE_TWO",H=function(e){return{type:G,payload:e}},L=function(e){return{type:C,payload:e}},B=function(e){return{type:U,payload:e}},Q=function(e){return{type:F,payload:e}},J=function(e){return{type:M,payload:e}},q=n(11),V=[{image:"assets/imgs/w-king.png",x:4,y:7,type:r.KING,team:a.OUR,id:1},{image:"assets/imgs/w-queen.png",x:3,y:7,type:r.QUEEN,team:a.OUR,id:2},{image:"assets/imgs/w-pawn.png",x:0,y:6,type:r.PAWN,team:a.OUR,id:3},{image:"assets/imgs/w-pawn.png",x:1,y:6,type:r.PAWN,team:a.OUR,id:4},{image:"assets/imgs/w-pawn.png",x:2,y:6,type:r.PAWN,team:a.OUR,id:5},{image:"assets/imgs/w-pawn.png",x:3,y:6,type:r.PAWN,team:a.OUR,id:6},{image:"assets/imgs/w-pawn.png",x:4,y:6,type:r.PAWN,team:a.OUR,id:7},{image:"assets/imgs/w-pawn.png",x:5,y:6,type:r.PAWN,team:a.OUR,id:8},{image:"assets/imgs/w-pawn.png",x:6,y:6,type:r.PAWN,team:a.OUR,id:9},{image:"assets/imgs/w-pawn.png",x:7,y:6,type:r.PAWN,team:a.OUR,id:10},{image:"assets/imgs/w-knight.png",x:1,y:7,type:r.KNIGHT,team:a.OUR,id:11},{image:"assets/imgs/w-knight.png",x:6,y:7,type:r.KNIGHT,team:a.OUR,id:12},{image:"assets/imgs/w-rook.png",x:0,y:7,type:r.ROOK,team:a.OUR,id:13},{image:"assets/imgs/w-rook.png",x:7,y:7,type:r.ROOK,team:a.OUR,id:14},{image:"assets/imgs/w-bishop.png",x:2,y:7,type:r.BISHOP,team:a.OUR,cellColor:"black",id:15},{image:"assets/imgs/w-bishop.png",x:5,y:7,type:r.BISHOP,team:a.OUR,cellColor:"white",id:16},{image:"assets/imgs/b-king.png",x:4,y:0,type:r.KING,team:a.OPPONENT,id:17},{image:"assets/imgs/b-queen.png",x:3,y:0,type:r.QUEEN,team:a.OPPONENT,id:18},{image:"assets/imgs/b-pawn.png",x:0,y:1,type:r.PAWN,team:a.OPPONENT,id:19},{image:"assets/imgs/b-pawn.png",x:1,y:1,type:r.PAWN,team:a.OPPONENT,id:20},{image:"assets/imgs/b-pawn.png",x:2,y:1,type:r.PAWN,team:a.OPPONENT,id:21},{image:"assets/imgs/b-pawn.png",x:3,y:1,type:r.PAWN,team:a.OPPONENT,id:22},{image:"assets/imgs/b-pawn.png",x:4,y:1,type:r.PAWN,team:a.OPPONENT,id:23},{image:"assets/imgs/b-pawn.png",x:5,y:1,type:r.PAWN,team:a.OPPONENT,id:24},{image:"assets/imgs/b-pawn.png",x:6,y:1,type:r.PAWN,team:a.OPPONENT,id:25},{image:"assets/imgs/b-pawn.png",x:7,y:1,type:r.PAWN,team:a.OPPONENT,id:26},{image:"assets/imgs/b-knight.png",x:6,y:0,type:r.KNIGHT,team:a.OPPONENT,id:27},{image:"assets/imgs/b-knight.png",x:1,y:0,type:r.KNIGHT,team:a.OPPONENT,id:28},{image:"assets/imgs/b-rook.png",x:7,y:0,type:r.ROOK,team:a.OPPONENT,id:29},{image:"assets/imgs/b-rook.png",x:0,y:0,type:r.ROOK,team:a.OPPONENT,id:30},{image:"assets/imgs/b-bishop.png",x:2,y:0,type:r.BISHOP,team:a.OPPONENT,cellColor:"white",id:31},{image:"assets/imgs/b-bishop.png",x:5,y:0,type:r.BISHOP,team:a.OPPONENT,cellColor:"black",id:32}],D=function(){return V.map((function(e){return Object(q.a)({},e)}))},X=new WebSocket("ws://evening-beach-47135.herokuapp.com"),Y=function(){var e=Object(j.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={event:"check-chessboard",boardState:t},X.send(JSON.stringify(n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(e){var t={event:"queue",data:e};X.send(JSON.stringify(t))},Z=window.indexedDB.open("olegrabushko-JSFE2021Q1",1);Z.onupgradeneeded=function(e){(w=e.target.result).createObjectStore("player",{autoIncrement:!0})},Z.onerror=function(e){var t=e.target.errorCode;console.log("error".concat(t))},Z.onsuccess=function(e){w=e.target.result};var $=function(){var e=Object(j.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.transaction(["player"],"readwrite");case 2:return n=e.sent,e.next=5,n.objectStore("player");case 5:e.sent.getAll().onsuccess=function(){var e=Object(j.a)(f.a.mark((function e(n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.target.result;case 2:(a=e.sent)&&t(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee={gamers:[],time:"",movesCount:0,winner:!0},te=function(){w.transaction(["player"],"readwrite").objectStore("player").add(ee)},ne=function(){var e=Object(j.a)(f.a.mark((function e(t,n,a,r){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){te(),r(!0),n(!1),t(!0),a.current.style.pointerEvents="none"}),1e3);case 1:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),ae=function(){var e=Object(j.a)(f.a.mark((function e(){var t,n,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:return t=e.sent,e.next=5,S();case 5:return n=e.sent,a=localStorage.getItem("player"),r=t?1:0,e.abrupt("return",n[r].name===a);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=n(14),ce=[8,7,6,5,4,3,2,1],se=["a","b","c","d","e","f","g","h"],ie=function(e,t,n,a,r,c,s,i){a?function(e,t,n){var a={event:"move-message",data:{move:e,time:t,url:n}};X.send(JSON.stringify(a))}(e,n,t):c&&!s?r(Q({moves:[].concat(Object(re.a)(i.one.moves),[e]),times:[].concat(Object(re.a)(i.one.times),[n]),figures:[].concat(Object(re.a)(i.one.figures),[t])})):c||s||r(J({moves:[].concat(Object(re.a)(i.two.moves),[e]),times:[].concat(Object(re.a)(i.two.times),[n]),figures:[].concat(Object(re.a)(i.two.figures),[t])}))},oe=function(e){var t=e.setWin,n=e.setActiveForBoard,s=e.setTurnQueue,i=e.setStart,o=e.setPieces,u=e.setTimer,_=e.setPlayer,p=e.pieces,m=e.player,b=e.boardActivator,d=e.checkUpdatedMoves,h=e.win,y=e.start,x=e.time,w=e.checkTurnQueue,k=Object(c.useState)(null),P=Object(O.a)(k,2),E=P[0],I=P[1],R=Object(c.useState)(0),C=Object(O.a)(R,2),U=C[0],F=C[1],M=Object(c.useState)(0),K=Object(O.a)(M,2),G=K[0],H=K[1],L=Object(c.useState)(null),B=Object(O.a)(L,2),Q=B[0],J=B[1],q=Object(c.useRef)(null),V=new N,D=[],X=function(e){return Math.floor(e/100)},Z=Object(W.c)((function(e){return e.game.onlineGame})),$=Object(W.b)(),ee=Object(W.c)((function(e){return e.moves})),te=document.querySelectorAll(".chess-field_figure__img__2EzTg");Object(c.useEffect)((function(){n(q)}),[]),document.onmousemove=Object(j.a)(f.a.mark((function e(){var t,n,a,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:return t=e.sent,e.next=5,S();case 5:n=e.sent,a=localStorage.getItem("player"),r=t?1:0,c=(Z?t:w)?"w":"b",y?te.forEach((function(e){var t=e;n[r].name!==a&&Z||t.style.backgroundImage.split("/")[2].split("")[0]===c?t.style.pointerEvents="none":t.style.pointerEvents="auto"})):te.forEach((function(e){return e.style.pointerEvents="none"}));case 10:case"end":return e.stop()}}),e)}))),Object(c.useEffect)((function(){(function(){var e=Object(j.a)(f.a.mark((function e(){var n,a,c,s,o,_,l,j;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0,p.forEach((function(e){e.type===r.KING&&n++})),n<2&&ne(t,i,b,u),Q&&(a=Q.innerHTML.split(","),c=Number(a[0]),s=Number(a[1]),o=Number(a[2]),_=Q.style.backgroundImage.split('"')[1],(l=p.find((function(e){return e.image===_&&e.id===o})))&&!h&&(j="".concat(se[c]).concat(ce[s],"-").concat(se[l.x]).concat(ce[l.y]),ie(j,_,x,Z,$,m,d,ee)));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[p]);for(var ae=function(e,t){return p.reduce((function(n,a){return a.x===U&&a.y===G?(2===Math.abs(G-t)&&a.type===r.PAWN?a.enPassant=!0:a.enPassant=!1,a.x=e,a.y=t,n.push(a)):a.x===e&&a.y===t||(a.type===r.PAWN&&(a.enPassant=!1),n.push(a)),n}),[])},re=function(){var e=Object(j.a)(f.a.mark((function e(t,n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:a=e.sent,A(!a),z(w),Y(ae(t,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),oe=function(){var e=Object(j.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o(ae(t,n)),s(!w),_((function(e){return!e}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ue=function(e,t,n,a,c,s){a?o(function(e,t,n){return p.reduce((function(a,c){return c.x===U&&c.y===G?(c.enPassant=!1,c.x=e,c.y=t,a.push(c)):c.x===e&&c.y===t+n||(c.type===r.PAWN&&(c.enPassant=!1),a.push(c)),a}),[])}(e,t,n)):c?(!function(e,t){if(t.type===r.PAWN&&(0===e||7===e)){var n=0===e?"w":"b";t.type=r.QUEEN,t.image="assets/imgs/".concat(n,"-queen.png")}}(t,s),Z?re(e,t):oe(e,t)):(E.style.position="relative",E.style.removeProperty("top"),E.style.removeProperty("left"))},_e=function(){var e=Object(j.a)(f.a.mark((function e(t){var n,r,c,s,i,o,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=q.current,E&&n&&(r=X(t.clientX-n.offsetLeft),c=X(t.clientY-n.offsetTop),(s=p.find((function(e){return e.x===U&&e.y===G})))&&(i=s.team===a.OUR?1:-1,E.style.zIndex="10",o=V.isValidMove(U,G,r,c,s.type,s.team,p,s.cellColor),u=V.isEnPassantMove(U,G,r,c,s.type,s.team,p),ue(r,c,i,u,o,s)),E.style.zIndex="1",I(null));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(e){for(var t=function(t){var n=void 0,a=void 0,r=ce[e]+t+1;p.forEach((function(r){r.x===t&&r.y===e&&(n=r.id,a=r.image)})),D.push(Object(l.jsx)(v,{image:a,number:r,position:"".concat(t,",").concat(e,",").concat(n),player:m},"".concat(e,",").concat(t)))},n=0;n<8;n++)t(n)},pe=0;pe<8;pe++)le(pe);return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{className:g.a.chess__container,children:[Object(l.jsx)("div",{className:g.a.chess__letters,children:se.map((function(e,t){return Object(l.jsx)("div",{className:g.a.chess__letter,children:e},t)}))}),Object(l.jsxs)("div",{className:g.a.chess__inner,children:[Object(l.jsx)("div",{className:g.a.chess__numbers,children:ce.map((function(e,t){return Object(l.jsx)("div",{className:g.a.chess__number,children:e},t)}))}),Object(l.jsx)("div",{ref:q,onMouseMove:function(e){var t=q.current;if(E&&t){var n=t.offsetLeft-10,a=t.offsetTop+3,r=t.offsetLeft+t.offsetWidth-65,c=t.offsetTop+t.offsetHeight-83,s=e.clientX-40,i=e.clientY-40;E.style.position="absolute",E.style.left="".concat(s<n?n:s>r?r:s,"px"),E.style.top="".concat(i<a?a:i>c?c:i,"px")}},onMouseDown:function(e){var t=q.current,n=e.target;if(J(n),n.classList.contains("chess-field_figure__img__2EzTg")&&t){var a=X(e.clientX-t.offsetLeft),r=X(e.clientY-t.offsetTop);F(a),H(r),I(n)}},onMouseUp:_e,className:g.a.chess__grid,children:D}),Object(l.jsx)("div",{className:g.a.chess__numbers__2,children:ce.map((function(e,t){return Object(l.jsx)("div",{className:g.a.chess__number__2,children:e},t)}))})]}),Object(l.jsx)("div",{className:g.a.chess__letters,children:se.map((function(e,t){return Object(l.jsx)("div",{className:g.a.chess__letter,children:e},t)}))})]})})},ue=n(6),_e=n.n(ue),le=function(e){var t=e.checkWinner,n=e.id,a=e.name,r=e.checkMove,s=e.checkLoss,i=Object(c.useState)(""),o=Object(O.a)(i,2),u=o[0],_=o[1],p=Object(c.useState)(""),m=Object(O.a)(p,2),b=m[0],d=m[1],h=Object(W.c)((function(e){return e.game.onlineGame})),g=Object(W.c)((function(e){return 1===n?e.moves.one:e.moves.two}));return Object(c.useEffect)((function(){(function(){var e=Object(j.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h){e.next=7;break}return e.next=3,S();case 3:t=e.sent,a===t[0].name?(_("white"),d("black")):(_("black"),d("white")),e.next=8;break;case 7:a===localStorage.getItem("player-1")?(_("white"),d("black")):(_("black"),d("white"));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{className:_e.a.player__field,children:[t||s?Object(l.jsx)("img",{className:_e.a.win__ico,src:"assets/imgs/win-ico.svg",alt:""}):"",Object(l.jsxs)("div",{className:_e.a.player__ava,style:{background:"".concat(1===n?b:u)},children:[null===a||void 0===a?void 0:a.split("")[0],r?Object(l.jsx)("img",{className:_e.a.moveHand__img,src:"assets/imgs/move-hand.svg",alt:""}):""]}),Object(l.jsx)("div",{className:_e.a.player__name,children:a}),Object(l.jsxs)("div",{className:_e.a.player__board,children:[Object(l.jsx)("div",{className:_e.a.part__one,children:g.figures.filter((function(e,t){return h?t%2===n-1:e})).map((function(e,t){return Object(l.jsx)("div",{className:_e.a.figure__img,style:{backgroundImage:"url(".concat(e,")")}},t)}))}),Object(l.jsx)("div",{className:_e.a.part__two,children:g.moves.filter((function(e,t){return h?t%2===n-1:e})).map((function(e,t){return Object(l.jsx)("div",{className:_e.a.move__info,children:e},t)}))}),Object(l.jsx)("div",{className:_e.a.part__three,children:g.times.filter((function(e,t){return h?t%2===n-1:e})).map((function(e,t){return Object(l.jsx)("div",{className:_e.a.move__info,children:e},t)}))})]})]})})},pe=function(e){var t=e.winner;return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("div",{className:_e.a.win__window,children:"Win ".concat(t)})})},me=function(e){var t=e.waitTime;return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("div",{className:_e.a.preloader__window,children:0!==t?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:_e.a.text,children:"Please, expect another player..."}),Object(l.jsx)("img",{className:_e.a.preloader,src:"assets/imgs/preloader.gif",alt:""})]}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:_e.a.text,children:"Timeout expired. Try again."}),Object(l.jsx)(m.b,{to:"/",children:Object(l.jsx)("button",{className:_e.a.lobby__btn,children:"to lobby"})})]})})})},be=function(){var e=Object(c.useState)(D),t=Object(O.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(0),s=Object(O.a)(r,2),i=s[0],o=s[1],u=Object(c.useState)(1),_=Object(O.a)(u,2),p=_[0],b=_[1],d=Object(c.useState)(!1),h=Object(O.a)(d,2),g=h[0],v=h[1],y=Object(c.useState)(!1),x=Object(O.a)(y,2),w=x[0],N=x[1],k=Object(c.useState)(!1),P=Object(O.a)(k,2),E=P[0],I=P[1],R=Object(c.useState)("00:00:00"),C=Object(O.a)(R,2),U=C[0],F=C[1],M=Object(c.useState)(!1),G=Object(O.a)(M,2),L=G[0],q=G[1],V=Object(c.useState)(!1),Y=Object(O.a)(V,2),z=Y[0],Z=Y[1],$=Object(c.useState)(!1),ne=Object(O.a)($,2),re=ne[0],ce=ne[1],se=Object(c.useState)(!0),ie=Object(O.a)(se,2),ue=ie[0],be=ie[1],de=Object(c.useState)(),fe=Object(O.a)(de,2),je=fe[0],Oe=fe[1],he=Object(c.useState)(),ge=Object(O.a)(he,2),ve=ge[0],ye=ge[1],xe=Object(c.useState)(!1),we=Object(O.a)(xe,2),Ne=we[0],ke=we[1],Pe=Object(c.useState)(null),Se=Object(O.a)(Pe,2),Ee=Se[0],Ie=Se[1],Te=Object(W.c)((function(e){return e.game.onlineGame})),Ae=Object(W.b)(),Re=Object(W.c)((function(e){return e.game.playersReady})),We=60;Object(c.useEffect)((function(){!function(e,t,n,a,r){X.onopen=function(){var e={event:"check-chessboard",boardState:D()};X.send(JSON.stringify(e))},X.onmessage=function(){var c=Object(j.a)(f.a.mark((function c(s){var i,o;return f.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,T();case 2:if(i=c.sent,"check-chessboard"===(o=JSON.parse(s.data)).event&&e(o.boardState),"queue"===o.event&&n((function(e){return!e})),"loss"===o.event&&(a(!0),r()),"players"!==o.event){c.next=12;break}return c.next=10,S();case 10:c.sent.length>1&&t(B(!0));case 12:"move-message"===o.event&&t(i?(u=o.data,{type:K,payload:u}):H(o.data));case 13:case"end":return c.stop()}var u}),c)})));return function(e){return c.apply(this,arguments)}}()}(a,Ae,ce,N,Ue),Oe(localStorage.getItem("player-1")),ye(localStorage.getItem("player-2")),Te||(ee.gamers=[localStorage.getItem("player-1"),localStorage.getItem("player-2")]);var e=setInterval((function(){Te&&(!function(e){var t={event:"players",data:e};X.send(JSON.stringify(t))}(!0),We--),0===We&&(clearInterval(e),b(0))}),1e3)}),[]),Object(c.useEffect)((function(){Re&&function(){var e=Object(j.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:return t=e.sent,e.next=5,Oe(t[0].name);case 5:return e.next=7,ye(t[1].name);case 7:ee.gamers=[t[0].name,t[1].name],Ce();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[Re]),window.onclick=Object(j.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:t=e.sent,console.log(t);case 4:case"end":return e.stop()}}),e)}))),Object(c.useEffect)((function(){Re&&Te&&function(){var e=Object(j.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=ke,e.next=3,ae();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()();o((function(e){return e+1})),ee.winner=re,ee.movesCount=i,ee.time=U}),[n]),Object(c.useEffect)((function(){var e,t=Number(U.split(":")[0]),n=Number(U.split(":")[1]),a=Number(U.split(":")[2]);return ue?clearInterval(e):e=setInterval((function(){t<3?n<59?a<59?a++:(n++,a=0):(t++,n=0,a=0):(n=0,a=0),F("0".concat(t," : ").concat(n>9?n:"0".concat(n)," : ").concat(a>9?a:"0".concat(a)))}),1e3),function(){return clearInterval(e)}}),[ue,U]);var Ce=function(){var e=Object(j.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A(!1),Z(!1),I(!0),be(!1),N(!1),F("00:00:00"),ce(!1),Ee&&(Ee.current.style.pointerEvents="auto");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(j.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(D()),Z(!0),Ae(Q({moves:[],times:[],figures:[]})),Ae(J({moves:[],times:[],figures:[]})),I(!1),v(!1),o(0);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Fe=function(){te(),N(!0),function(e){var t={event:"loss",data:e};X.send(JSON.stringify(t))}(!0),Ue()};return Object(l.jsxs)(l.Fragment,{children:[!Te||Re||w?"":Object(l.jsx)(me,{waitTime:p}),w||g?Object(l.jsx)(pe,{winner:g?re?je:ve:!re&&w?ve:je}):null,E||g?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:_e.a.timer,children:["Round Time: ",Object(l.jsx)("b",{children:U})]}),g?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(m.b,{to:"/",onClick:Ue,children:Object(l.jsx)("button",{className:_e.a.lobby__btn,children:"to lobby"})}),Object(l.jsx)(m.b,{to:"/replays",onClick:Ue,children:Object(l.jsx)("button",{className:_e.a.replays__btn,children:"replays"})})]}):"",g?Te?"":Object(l.jsx)("button",{className:_e.a.loss__btn,onClick:Ue,children:"reset"}):Te?Ne?Object(l.jsx)("button",{className:_e.a.loss__btn,onClick:Fe,children:"admit loss"}):"":Object(l.jsx)("button",{className:_e.a.loss__btn,onClick:Fe,children:"admit loss"})]}):Object(l.jsxs)(l.Fragment,{children:[Te?"":Object(l.jsx)("button",{className:_e.a.start__btn,onClick:Ce,children:"Start"}),Object(l.jsx)(m.b,{to:"/",children:Object(l.jsx)("button",{className:_e.a.lobby__btn,style:{left:"80%"},children:"to lobby"})}),Object(l.jsx)(m.b,{to:"/replays",onClick:Ue,children:Object(l.jsx)("button",{className:_e.a.replays__btn,children:"replays"})})]}),Object(l.jsxs)("div",{className:_e.a.game__container,children:[Object(l.jsx)(le,{name:je,id:1,checkWinner:!(!re||!g),checkLoss:!(!re||!w),checkMove:!(re||!E)}),Object(l.jsx)(oe,{setWin:v,setPieces:a,setActiveForBoard:Ie,setStart:I,setPlayer:q,setTimer:be,setTurnQueue:ce,checkTurnQueue:re,checkUpdatedMoves:z,pieces:n,win:g,player:L,time:U,boardActivator:Ee,start:E}),Object(l.jsx)(le,{name:ve,id:2,checkWinner:!(re||!g),checkLoss:!(re||!w),checkMove:!(!re||!E)})]})]})},de=n(19),fe=n.n(de),je=function(){var e=Object(c.useState)([]),t=Object(O.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){var e=setInterval((function(){w&&($(a),clearInterval(e)),console.log(n)}),1e3)}),[]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(m.b,{to:"/",children:Object(l.jsx)("button",{className:fe.a.lobby__btn,children:"to lobby"})}),Object(l.jsx)("div",{className:fe.a.repeats__container,children:n.map((function(e){return Object(l.jsx)("div",{className:fe.a.repeats__block,children:Object(l.jsxs)("div",{className:fe.a.chess__info,children:[Object(l.jsxs)("div",{className:fe.a.name__circle,children:[e.gamers[0][0],e.winner?Object(l.jsx)("div",{className:fe.a.win__marker}):""]}),Object(l.jsxs)("div",{className:fe.a.name__circle_2,children:[e.gamers[1][0],e.winner?"":Object(l.jsx)("div",{className:fe.a.win__marker})]}),Object(l.jsxs)("div",{className:fe.a.moves__info,children:["Moves: ",Object(l.jsx)("b",{children:e.movesCount})]}),Object(l.jsxs)("div",{className:fe.a.time__info,children:["Common Time: ",Object(l.jsx)("b",{children:e.time})]})]})})}))})]})},Oe=n(5),he=n.n(Oe),ge=function(e){var t=e.active,n=e.setActive,a=e.number,r=e.setInput,s=e.setInput2,i=Object(c.useRef)(null);return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("div",{className:t?he.a.modal:he.a.modal__disable,children:Object(l.jsxs)("div",{className:he.a.modal__inner,children:[Object(l.jsx)("div",{className:he.a.top__text,children:"Change player name"}),Object(l.jsxs)("div",{className:he.a.input__plus__text,children:[Object(l.jsx)("input",{type:"text",className:he.a.input,ref:i}),Object(l.jsxs)("div",{className:he.a.text,children:["Player ",a]})]}),Object(l.jsx)("button",{className:he.a.change__btn,onClick:function(){var e,t;n(!1),1===a?r("".concat(null===(e=i.current)||void 0===e?void 0:e.value)):s("".concat(null===(t=i.current)||void 0===t?void 0:t.value)),i.current.value=""},children:"Change"})]})})})},ve=function(e){var t=e.gameType,n=e.setGameType,a=Object(c.useState)(!1),r=Object(O.a)(a,2),s=r[0],i=r[1],o=Object(W.b)();window.onclick=function(){console.log(t)};var u=function(){var e=Object(j.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:(n=e.sent).forEach(function(){var e=Object(j.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length>1)){e.next=3;break}return e.next=3,I(t.id);case 3:if(t.name!==localStorage.getItem("player")){e.next=6;break}return e.next=6,I(t.id);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),o(L(!1)),o(B(!1)),""!==t&&(i(!0),"2"===t&&o(L(!0)));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("div",{className:s?he.a.modal__disable:he.a.modal,children:Object(l.jsxs)("div",{className:he.a.modal__inner,children:[Object(l.jsx)("div",{className:he.a.top__text,children:"Change Game"}),Object(l.jsxs)("div",{className:he.a.block__container,children:[Object(l.jsx)("div",{className:"2"!==t?he.a.inactive__type:he.a.active__type,onClick:function(){return n("2")},children:"Online"}),Object(l.jsx)("div",{className:"1"!==t?he.a.inactive__type:he.a.active__type,onClick:function(){return n("1")},children:"Offline"})]}),Object(l.jsx)("button",{className:he.a.change__game__btn,onClick:u,children:"OK"})]})})})},ye=function(e){var t=e.num,n=e.name,a=e.setPlayer,r=e.setModalActive;return Object(l.jsxs)("div",{className:he.a.player__box,children:[Object(l.jsx)("div",{className:he.a.player__ava}),Object(l.jsx)("div",{className:he.a.player__name,onClick:function(){r(!0),a(t)},children:""!==n?n:"Player ".concat(t)})]})},xe=function(){var e=Object(c.useState)(0),t=Object(O.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),s=Object(O.a)(r,2),i=s[0],o=s[1],u=Object(c.useState)(!0),_=Object(O.a)(u,2),p=_[0],b=_[1],d=Object(c.useState)(""),h=Object(O.a)(d,2),g=h[0],v=h[1],y=Object(c.useState)(""),x=Object(O.a)(y,2),w=x[0],N=x[1],k=Object(c.useState)(""),P=Object(O.a)(k,2),E=P[0],I=P[1],T=Object(c.useState)(""),A=Object(O.a)(T,2),W=A[0],C=A[1],U=Object(c.useRef)(null),F=function(){var e=Object(j.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.setItem("player","".concat(""!==E?E:"Unknown")),localStorage.setItem("player-1","".concat(""!==g?g:"Player 1")),localStorage.setItem("player-2","".concat(""!==w?w:"Player 2")),e.next=5,R();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(j.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I("".concat(null===(t=U.current)||void 0===t?void 0:t.value)),U.current.value="",b(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return window.onclick=Object(j.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:t=e.sent,console.log(t);case 4:case"end":return e.stop()}}),e)}))),Object(l.jsxs)(l.Fragment,{children:["2"===W?Object(l.jsx)("div",{className:p?he.a.modal:he.a.modal__disable,children:Object(l.jsxs)("div",{className:he.a.modal__inner,children:[Object(l.jsx)("div",{className:he.a.top__text_special,children:"Type Your Name"}),Object(l.jsx)("input",{className:he.a.input,type:"text",ref:U}),Object(l.jsx)("button",{className:he.a.change__btn,onClick:M,children:"OK"})]})}):"",Object(l.jsxs)("div",{className:he.a.body__container,children:["1"===W?Object(l.jsx)(ye,{num:1,name:g,setPlayer:a,setModalActive:o}):"",Object(l.jsxs)("div",{className:he.a.btns__container,children:[Object(l.jsx)(m.b,{to:"/game",children:Object(l.jsx)("button",{className:he.a.start__btn,onClick:F,children:"Start"})}),Object(l.jsx)("div",{className:he.a.network__info,children:"2"===W?"Online":"Offline"}),Object(l.jsx)(m.b,{to:"/replays",children:Object(l.jsx)("button",{className:he.a.view__btn,children:"View replays"})})]}),"1"===W?Object(l.jsx)(ye,{num:2,name:w,setPlayer:a,setModalActive:o}):""]}),Object(l.jsx)(ve,{setGameType:C,gameType:W}),Object(l.jsx)(ge,{active:i,setActive:o,number:n,setInput:v,setInput2:N})]})},we=function(){return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(m.a,{children:Object(l.jsxs)(b.c,{children:[Object(l.jsx)(b.a,{path:"/game",children:Object(l.jsx)(be,{})}),Object(l.jsx)(b.a,{path:"/replays",children:Object(l.jsx)(je,{})}),Object(l.jsx)(b.a,{path:"/",children:Object(l.jsx)(xe,{})})]})})})},Ne=n(43),ke=n.n(Ne),Pe=function(){return Object(l.jsx)("div",{className:ke.a.footer__container,children:Object(l.jsx)("div",{children:"Rabushko Oleg\xa9 - RS School 2021"})})};n(76);var Se=function(){return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(p,{}),Object(l.jsx)(we,{}),Object(l.jsx)(Pe,{})]})},Ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,78)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))},Ie=n(23),Te={onlineGame:!1,playersReady:!1};var Ae={one:{moves:[],times:[],figures:[]},two:{moves:[],times:[],figures:[]}};var Re=n(44),We=n(45),Ce=Object(Ie.combineReducers)({game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(q.a)(Object(q.a)({},e),{},{onlineGame:t.payload});case U:return Object(q.a)(Object(q.a)({},e),{},{playersReady:t.payload});default:return e}},moves:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case F:return Object(q.a)(Object(q.a)({},e),{},{one:t.payload});case M:return Object(q.a)(Object(q.a)({},e),{},{two:t.payload});case K:return Object(q.a)(Object(q.a)({},e),{},{one:{moves:[].concat(Object(re.a)(e.one.moves),[n.move]),times:[].concat(Object(re.a)(e.one.times),[n.time]),figures:[].concat(Object(re.a)(e.one.figures),[n.url])}});case G:return Object(q.a)(Object(q.a)({},e),{},{two:{moves:[].concat(Object(re.a)(e.two.moves),[n.move]),times:[].concat(Object(re.a)(e.two.times),[n.time]),figures:[].concat(Object(re.a)(e.two.figures),[n.url])}});default:return e}}}),Ue=Object(Ie.createStore)(Ce,Object(Re.composeWithDevTools)(Object(Ie.applyMiddleware)(We.a)));o.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(W.a,{store:Ue,children:Object(l.jsx)(Se,{})})}),document.getElementById("root")),Ee()},9:function(e,t,n){e.exports={App:"chess-field_App__VhmWz",green:"chess-field_green__2KY8i",chess__container:"chess-field_chess__container__1LIKd",chess__letters:"chess-field_chess__letters__1K7XC",chess__letter:"chess-field_chess__letter__LX7q3",chess__inner:"chess-field_chess__inner__1s_RB",chess__numbers:"chess-field_chess__numbers__1eqo-",chess__numbers__2:"chess-field_chess__numbers__2__3BaI5",chess__number:"chess-field_chess__number__2EnBt",chess__number__2:"chess-field_chess__number__2__3x098",chess__grid:"chess-field_chess__grid__2XuVj",white__field:"chess-field_white__field__12J6w",black__field:"chess-field_black__field__3wS7w",figure__img:"chess-field_figure__img__20vFt"}}},[[77,1,2]]]);
//# sourceMappingURL=main.cd0fef1e.chunk.js.map